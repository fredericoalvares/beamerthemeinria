
\ProvidesPackage{beamerthemeinria}[2014/08/22]
\usepackage{eso-pic}
\usepackage{etoolbox}
\usepackage{xcolor}
\usepackage{enumitem} 
\usetheme{default}
\useoutertheme{infolines}


\ProcessOptions

\mode<presentation>

\def\insertnavigation#1{\relax}
\useoutertheme[subsection=false,shadow]{miniframes}
\setbeamertemplate{section in toc}[sections numbered]
\setbeamertemplate{subsection in toc}[subsections numbered]

%\newcommand{\rightTextArrow}{\bullet}
%\newcommand{\quoted}[1]{›#1‹}
%\newcommand{\doublequoted}[1]{»#1«}


\setlength{\parskip}{0.5em}
%\setlength{\itemsep}{1em}
\setlist[itemize]{itemsep=0.25cm}
\setlist[itemize,1]{label=$\bullet$}
\setlist[itemize,2]{label=$\circ$}
\setlist[itemize,3]{label=$\rightarrow$}
\setlist[itemize,4]{label=$\minus$}
\setlist[enumerate]{itemsep=0.25cm}
\setlist[enumerate,1]{%
  label=\arabic*.,
}


\setbeamertemplate{navigation symbols}{}
\renewcommand{\sfdefault}{lmss}
\sffamily


% Primary Colors
\definecolor{inriaRed}{rgb}{0.882352941,0,0.098039216}
\definecolor{inriaRedDark}{rgb}{0.588235294,0,0.058823529}
\definecolor{inriaWarmGreyDark}{rgb}{0.274509804,0.254901961,0.235294118}
\definecolor{inriaWarmGreyLight}{rgb}{0.666666667,0.647058824,0.62745098}
\definecolor{rouge2}{RGB}{230,68,57}  % red S

% Secondary Colors
\definecolor{inriaSec1}{rgb}{0,0.588235294,0.509803922}
\definecolor{inriaSec1Dark}{rgb}{0,0.392156863,0.31372549}
\definecolor{inriaSec1Comp}{rgb}{0.294117647,0.745098039,0.882352941}
\definecolor{inriaSec1CompDark}{rgb}{0.196078431,0.490196078,0.568627451}

\definecolor{inriaSec2}{rgb}{0.607843137,0.764705882,0.156862745}
\definecolor{inriaSec2Dark}{rgb}{0.411764706,0.490196078,0.098039216}
\definecolor{inriaSec2Comp}{rgb}{0.254901961,0.156862745,0.509803922}
\definecolor{inriaSec2CompDark}{rgb}{0.176470588,0.098039216,0.333333333}

\definecolor{inriaSec3}{rgb}{0.509803922,0.078431373,0.31372549}
\definecolor{inriaSec3Dark}{rgb}{0.338345865,0.058823529,0.196078431}
\definecolor{inriaSec3Comp}{rgb}{1,0.509803922,0}
\definecolor{inriaSec3CompDark}{rgb}{0.666666667,0.333333333,0}




% General
\setbeamercolor{normal text}{fg=inriaWarmGreyDark}
\setbeamercolor{structure}{fg=inriaWarmGreyDark}
\setbeamercolor{alerted text}{fg=inriaRed}
\setbeamercolor{example text}{fg=white}
\setbeamercolor{copyright text}{fg=inriaWarmGreyLight}
%\setbeamercolor{palette primary}{fg=inriaWarmGreyDark}
%\setbeamercolor{palette secondary}{fg=inriaWarmGreyDark,bg=inriaWarmGreyLight}
%\setbeamercolor{palette tertiary}{fg=black,bg=inriaWarmGreyLight}
%\setbeamercolor{palette quaternary}{fg=white, bg=inriaWarmGreyDark}
%

%\setbeamersize{text margin left=1cm,text margin right=1cm}



%---------------------------------------------------------------------
% Colors
%---------------------------------------------------------------------

\setbeamercolor{title}{fg=white}
\setbeamercolor{subtitle}{fg=white}
\setbeamercolor{institute}{fg=white}
\setbeamercolor{author}{fg=white}
\setbeamercolor{date}{fg=white}
\setbeamercolor{section title}{fg=white}
\setbeamercolor{section subtitle}{fg=white}
\setbeamercolor{page number in head/foot}{fg=gray}
\setbeamercolor{author in head/foot}{fg=gray,bg=}
\setbeamercolor{title in head/foot}{fg=gray,bg=}
\setbeamercolor{author with bg in head/foot}{fg=white,bg=}
\setbeamercolor{title with bg in head/foot}{fg=white,bg=}
\setbeamercolor{thanks}{fg=white}

% Blocks
\setbeamercolor{block title}{fg=white,bg=inriaWarmGreyLight}
\setbeamercolor{block body}{fg=black, bg={gray!20}}
\setbeamercolor{block title example}{fg=white, bg=inriaSec1Dark}
\setbeamercolor{block body example}{fg=white, bg=inriaSec1}
\setbeamercolor{block title alerted}{fg=white, bg=inriaRedDark}
\setbeamercolor{block body alerted}{fg=white, bg=inriaRed}
%frametitle
\setbeamercolor{frametitle}{fg=inriaWarmGreyDark, bg=}
\setbeamercolor{headline}{fg=inriaWarmGreyDark, bg=}
%

%---------------------------------------------------------------------
% Fonts
%---------------------------------------------------------------------

\setbeamerfont{title}{size=\huge}
\setbeamerfont{frametitle}{size=\LARGE}
\setbeamerfont{subtitle}{size=\Large}
\setbeamerfont{date}{size=\large}
\setbeamerfont{author}{size=\large}
\setbeamerfont{institute}{size=\large}
\setbeamerfont{section title}{size=\Huge}
\setbeamerfont{section subtitle}{size=\large}
\setbeamerfont{page number in head/foot}{size=\tiny}
\setbeamerfont{title in head/foot}{size=\tiny}
\setbeamerfont{author in head/foot}{size=\tiny}
\setbeamerfont{thanks}{size=\Huge}
%\setbeamerfont{normal text}{size=\fontsize{40}{48}}

%---------------------------------------------------------------------
% Titlepage
%---------------------------------------------------------------------

\def\maketitle{	
	%\ifbeamer@inframe\titlepage\else\frame[plain]{\titlepage}\fi
	\setbeamertemplate{background canvas}{\includegraphics[width=\paperwidth,height=\paperheight]{images/premiere-sc-en}} 
	\setbeamertemplate{footline}{}
	\begin{frame}[plain]
		\centering
	\vspace{11em}	
	\ifx\inserttitle\@empty%
	\else%
		{\usebeamerfont{title}\usebeamercolor[fg]{title}\MakeUppercase{\inserttitle}\par}%
	\fi%
	\ifx\insertsubtitle\@empty%
	\else%
		{\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
		\vspace*{5mm}
	\fi%
	\vfill
	
	\ifx\insertauthor\@empty%
	\else%
		{\usebeamerfont{author}\usebeamercolor[fg]{author}\insertauthor\par}%
	\fi%
	\ifx\insertinstitut\@empty%
	\else%
		
		{\usebeamerfont{institute}\usebeamercolor[fg]{institute}\insertinstitute\par}%
	\fi% 
	\vfill
\ifx\insertdate\@empty%
	\else%
\vspace*{3mm}
		{\usebeamerfont{date}\usebeamercolor[fg]{date}\insertdate\par}%
	\fi% 
	

	\end{frame}
	
	\setbeamertemplate{background canvas}{\includegraphics[width=\paperwidth,height=\paperheight]{images/basrouge}} 	
}

%---------------------------------------------------------------------
% Section pages
%---------------------------------------------------------------------

% Make Sectionhead uppercase
\newcommand{\insertsectionHEAD}{%
	\expandafter\insertsectionHEADaux\insertsectionhead}
	\newcommand{\insertsectionHEADaux}[3]{\MakeUppercase{#3}
}


%-------------------------------------------------------
% Macros for backgrounds according to the section number
%-------------------------------------------------------

\newcounter{subthemescnt}
\newcommand\setsubtheme[2]{%
  \stepcounter{subthemescnt}%
  \csdef{sectionBG\thesubthemescnt}{#1}
  \csdef{frameBG\thesubthemescnt}{#2}
}
\newcommand\getsectionBG[1]{%
  \setbeamertemplate{background canvas}{\includegraphics[width=\paperwidth,height=\paperheight]{\csuse{sectionBG#1}}}
}
\newcommand\getframeBG[1]{%
  \setbeamertemplate{background canvas}{\includegraphics[width=\paperwidth,height=\paperheight]{\csuse{frameBG#1}}}
}


%-------------------------------------------------------
% Sets section title and regular frame's backgrounds 
%-------------------------------------------------------

\setsubtheme{images/fondrouge+tab}{images/basrouge}
\setsubtheme{images/fondbleu}{images/basbleu}
\setsubtheme{images/fondvert}{images/basvert}
\setsubtheme{images/fondgris}{images/basgris}
\setsubtheme{images/fondorange}{images/basorange}
\setsubtheme{images/fondviolet}{images/basviolet}
\setsubtheme{images/fondvertkaki}{images/basvertkaki}

%\if@doSectionPage\@empty
%\else

% Insert frame with section title at every section start
\AtBeginSection[]
{
%-------------------------------
% Background for section title frame
%-------------------------------
\getsectionBG{\thesection}

%-------------------------------
% Footline for section title frames
%-------------------------------
\setbeamertemplate{footline}{
\leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.9\paperwidth,ht=2.25ex,dp=1ex,left]{author in head/foot}%
  %  {\usebeamerfont{author in head/foot}\usebeamercolor[fg]{author in head/foot}\insertshortauthor\text{ - }}
 \ifx\inserttitle\@empty%
	\else%
 \hspace{8em}
{\usebeamerfont{title in head/foot}\usebeamercolor[fg]{title in head/foot}\insertshorttitle}
	\fi% 
 \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.1\paperwidth,ht=2.25ex,dp=1ex,right]{title in head/foot}%
%    hspace*{3em}
{\usebeamerfont{page number in head/foot}\usebeamercolor[fg]{page number in head/foot}\insertframenumber{} / \inserttotalframenumber}\hspace*{1ex}
  \end{beamercolorbox}}%
  \vskip10pt%
}

%-------------------------------
% Section title frame
%-------------------------------

\begin{frame}
   {\usebeamerfont{section title}\usebeamercolor[fg]{section title}\MakeUppercase\thesection\par\insertsectionHEAD\par}%
\end{frame}

%-------------------------------
% Background for regular frames
%-------------------------------
\getframeBG{\thesection}

%-------------------------------
% Footline for regular frames
%-------------------------------

\setbeamertemplate{footline}{
\leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.9\paperwidth,ht=2.25ex,dp=1ex,left]{author in head/foot}%
%  {\usebeamerfont{author in head/foot}\usebeamercolor[bg]{author in head/foot}\insertshortauthor\text{ - }}
 % {\usebeamerfont{title in head/foot}\usebeamercolor[bg]{title in head/foot}\insertshorttitle}
  \ifx\inserttitle\@empty%
	\else%
 	\hspace{8em}
	{\usebeamerfont{title in with bg head/foot}\usebeamercolor[bg]{title in head/foot}\insertshorttitle}
	\fi% 
\end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.1\paperwidth,ht=2.25ex,dp=1ex,right]{title in head/foot}%
%    hspace*{3em}
{\usebeamerfont{page number with bg in head/foot}\usebeamercolor[bg]{page number in head/foot}\insertframenumber{} / \inserttotalframenumber}\hspace*{1ex}
  \end{beamercolorbox}}%
  \vskip10pt%
}
}
%\fi


%---------------------------------------------------------------------
% Last page
%---------------------------------------------------------------------

\newcommand\makelast[1]{%
	%\ifbeamer@inframe\titlepage\else\frame[plain]{\titlepage}\fi
        \setbeamertemplate{background canvas}{\includegraphics[width=\paperwidth,height=\paperheight]{images/derniere-sc-en}} 
	\setbeamertemplate{footline}{}
	
	\begin{frame}[plain]
	\vspace{2em}	
	\begin{center}
	{\usebeamerfont{thanks}\usebeamercolor[fg]{thanks}#1}\\
	\vspace{1em}
	\ifx\insertauthor\@empty%
	\else%
		{\usebeamerfont{author}\usebeamercolor[fg]{author}\insertauthor\par}%
	\fi%
	\ifx\insertinstitut\@empty%
	\else%
		\vspace*{3mm}
		{\usebeamerfont{institute}\usebeamercolor[fg]{institute}\insertinstitute\par}%
	\fi% 
	\vspace*{5mm}
	\end{center}
	\end{frame}
}


%---------------------------------------------------------------------
% Blocks
%---------------------------------------------------------------------
\setbeamertemplate{block begin}
{
  \setbeamercolor{item}{parent=block body}
  \par\vskip\medskipamount%
  \begin{beamercolorbox}[sep=.5ex,dp=0.6ex,leftskip=0.5ex,rightskip=0.5ex]{block title}
    \usebeamerfont*{
	    block title
    }
    \insertblocktitle%
  \end{beamercolorbox}%
  {\parskip0pt\par}%
  {\nointerlineskip\vskip-0.5pt}%
  \usebeamerfont{
	  block body
  }%
  \begin{beamercolorbox}[sep=.5ex,dp=0.6ex,leftskip=0.5ex,rightskip=0.5ex,vmode]{block body}%
}
\setbeamertemplate{block end}  
{\end{beamercolorbox}\vskip\smallskipamount}

\setbeamertemplate{block alerted begin}
{
  \setbeamercolor{item}{parent=block body alerted}
  \par\vskip\medskipamount%
  \begin{beamercolorbox}[sep=.5ex,dp=0.6ex,leftskip=0.5ex,rightskip=0.5ex]{block title alerted}
    \usebeamerfont*{
	    block title alerted
    }
    \insertblocktitle%
  \end{beamercolorbox}%
  {\parskip0pt\par}%
  {\nointerlineskip\vskip-0.5pt}%
  \usebeamerfont{
	  block body alerted
  }%
  \begin{beamercolorbox}[sep=.5ex,dp=0.6ex,leftskip=0.5ex,rightskip=0.5ex,vmode]{block body alerted}%
}
\setbeamertemplate{block alerted end}
{\end{beamercolorbox}\vskip\smallskipamount}

\setbeamertemplate{block example begin}
{
  \par\vskip\medskipamount%
  \begin{beamercolorbox}[sep=.5ex,dp=0.6ex,leftskip=0.5ex,rightskip=0.5ex]{block title example}
    \usebeamerfont
    *{block title example}\insertblocktitle%
  \end{beamercolorbox}%
  {\parskip0pt\par}%
  {\nointerlineskip\vskip-0.5pt}%
  \usebeamerfont
  {block body example}%
  \begin{beamercolorbox}[sep=.5ex,dp=0.6ex,leftskip=0.5ex,rightskip=0.5ex,vmode]{block body example}%
}
\setbeamertemplate{block example end}
{\end{beamercolorbox}\vskip\smallskipamount}




\mode <all>

